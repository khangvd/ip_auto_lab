---
###################### Service: Tenant  ######################
# VLANs will only be Layer 2 unless an ip address is assigned to them.
# VRFs will only be created on a border or leaf if a VLAN within that VRF is to be created on that deivce type
# Even if it is not a L3_tenant still creates VRF and reserves the L3VNI/VLAN (stops renumbering if made L3_tenant in the future)

# At a minimun per-tenant you need:
#     - tenant_name: Name                     Name of the VRF
#       l3_tenant: True or False              Does it need SVIs or is routing done on a device external to the L&S fabric (i.e router)
#       vlans:                                VLANs within this tenant
#         - num: Number                       VLAN number
#           name: Name                        VLAN Name

# These settings are optional and need not be set. Setting them overides the explicit default values
#           ip_addr: x.x.x.x/24               Adding an IP address makes it a L3 VLAN (default L2 only)
#           ipv4_bgp_redist: True or False    Whether thhe SVI is redistributed into IPv4 BGP addr-fam (default True unless no ip_addr in which case is False)
#           create_on_leaf: True or False     Whether this VLAN is created on the leafs (default True)
#           create_on_border: True or False   Whether this VLAN is created on the borders (default False)

#### Base variables ####
svc_tnt:
  tnt:
    - tenant_name: BLU
      l3_tenant: True
      vlans:
        - num: 10
          name: data
          ip_addr: 10.10.10.1/24
        - num: 20
          name: dev
          ip_addr: 10.10.20.1/24
        - num: 24
          name: servers
          ip_addr: 10.10.24.1/24
        - num: 30
          name: lb_vips
          ip_addr: 10.10.30.1/24
          ipv4_bgp_redist: False
        - num: 40
          name: ha_keepalive
        - num: 12
          name: storage
          ip_addr: 10.10.12.1/24
        - num: 11
          name: apps
          ip_addr: 10.10.11.1/24
        - num: 13
          name: compute
          ip_addr: 10.10.13.1/24

    - tenant_name: GRN
      l3_tenant: True
      vlans:
        - num: 110
          name: grn-web
          ip_addr: 10.250.110.1/24
          create_on_border: True
          ipv4_bgp_redist: False
        - num: 111
          name: grn-svc
        - num: 112
          name: grn-mgmt
        - num: 120
          name: grn-mail
          ip_addr: 10.250.120.1/24
          create_on_border: True
          ipv4_bgp_redist: False

    - tenant_name: AMB
      l3_tenant: False
      vlans:
        - num: 210
          name: amb-web
          create_on_border: True
        - num: 220
          name: amb-mail
          create_on_border: True

    - tenant_name: RED
      l3_tenant: False
      vlans:
        - num: 90
          name: red-ctt1
          create_on_border: True
          create_on_leaf: False
        - num: 91
          name: red-ctt2
          create_on_border: True
          create_on_leaf: False

#### Advanced variables ####
# Each L3 Tenant requires a VLAN and VNI. These are automatically generated by incrementing the L3VNI base_vlan and base_vni
# Each tenant vlan requires a VNI. These are formed of an increment of 10000 per-tenant with each VLAN number added to this

  adv:
    bse_vni:
      tnt_vlan: 3001          # Starting VLAN number for transit L3VNI
      l3vni: 3001             # Starting VNI number for transit L3VNI
      l2vni: 10000            # Start L2VNI and the range to add to each tenants vlan.
    vni_incre:
      tnt_vlan: 1             # Value by which to increase transit L3VNI VLAN number for each tenant
      l3vni: 1                # Value by which to increase transit L3VNI VNI number for each tenant
      l2vni: 10000            # Value by which to increase the L2VNI range used (range + vlan) for each tenant

# service_routing.yml (svc_rtr.adv.redist) takes precedence, this is only used if it is not defined in service_routing.yml
    redist:
      rm_name: RM_src_to_dst     # Name can be anythign but must include src and dst as they are replaced with 'CONN' and 'BGPxx_VRF'